<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flip Calculator | InvestorBlueprint</title>
    <meta name="description" content="Analyze fix-and-flip deals with MAO, profit, ROI, cost breakdowns, and sensitivity scenarios." />
    <link rel="stylesheet" href="tool-styles.css" />
    <link rel="stylesheet" href="../assets/css/flip-calculator.css" />
  </head>
  <body data-tool="flip">
    <header class="tool-navbar">
      <div class="brand-menu">
        <a class="tool-logo" href="../index.html">InvestorBlueprint</a>
        <nav class="brand-dropdown" aria-label="Quick navigation">
          <a href="../index.html" data-i18n="navHome">Home</a><a href="../index.html#tools" data-i18n="navTools">Tools</a>
          <a href="../index.html#learn" data-i18n="navLearn">Learn</a><a href="../pricing.html" data-i18n="navPricing">Pricing</a>
          <a href="../login.html" data-i18n="navLogin">Login</a>
        </nav>
      </div>
      <div class="lang-switcher" role="group" aria-label="Language selector">
        <button type="button" class="lang-option" data-lang="en"><img class="flag-emoji" src="../assets/flags/us.svg" alt="" aria-hidden="true">EN</button>
        <button type="button" class="lang-option" data-lang="es"><img class="flag-emoji" src="../assets/flags/es.svg" alt="" aria-hidden="true">ES</button>
      </div>
    </header>

    <main class="container">
      <section class="fc-wrap pro-tool-card" id="flip-calculator">
        <span class="badge pro">PRO</span>
        <div class="tool-upgrade-overlay" role="note">
          <strong>Upgrade required for full access.</strong>
          <a class="card-btn" href="../pricing.html">Upgrade</a>
        </div>
        <header class="fc-header">
          <div>
            <h2 class="fc-title">Flip Calculator PRO</h2>
            <p class="fc-subtitle">DiagnÃ³stico financiero completo en menos de 60 segundos.</p>
          </div>
          <div class="fc-header-actions">
            <button class="fc-btn fc-btn-ghost" id="fcDuplicateBtn" type="button">Save Snapshot</button>
            <button class="fc-btn fc-btn-ghost" id="fcExportPdfBtn" type="button">ðŸ“„ Export to PDF</button>
            <button class="fc-btn fc-btn-ghost" id="fcExportExcelBtn" type="button">ðŸ“Š Export to Excel</button>
          </div>
        </header>

        <div class="fc-grid">
          <div class="fc-panel">
            <div class="fc-section"><h3>1) Property Data</h3>
              <div class="fc-row"><label>Purchase Price</label><input class="fc-input money" id="purchasePrice" inputmode="numeric" /></div>
              <div class="fc-row"><label>ARV</label><input class="fc-input money" id="arv" inputmode="numeric" /></div>
              <div class="fc-row"><label>Expected Selling Price</label><input class="fc-input money" id="expectedSellingPrice" inputmode="numeric" /></div>
              <div class="fc-row"><label>Rehab Budget</label><input class="fc-input money" id="rehab" inputmode="numeric" /></div>
              <div class="fc-row"><label>Estimated Hold Time (months)</label><input class="fc-input" id="months" inputmode="numeric" /></div>
            </div>

            <div class="fc-section"><h3>2) Financing Structure</h3>
              <div class="fc-row"><label>Loan-to-Value % (Purchase)</label><input class="fc-input percent" id="loanPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Rehab Financing %</label><input class="fc-input percent" id="rehabFinancingPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Down Payment %</label><input class="fc-input percent" id="downPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Points %</label><input class="fc-input percent" id="pointsPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Interest Rate APR %</label><input class="fc-input percent" id="interestApr" inputmode="decimal" /></div>
              <div class="fc-row"><label>Loan Term (months)</label><input class="fc-input" id="loanTermMonths" inputmode="numeric" /></div>
            </div>

            <div class="fc-section"><h3>3) Holding & Operating Costs</h3>
              <div class="fc-row"><label>Closing Costs % (buy side)</label><input class="fc-input percent" id="buyClosingPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Selling Costs %</label><input class="fc-input percent" id="sellingCostsPct" inputmode="decimal" /></div>
              <div class="fc-row"><label>Monthly Holding Cost</label><input class="fc-input money" id="holdingMonthly" inputmode="numeric" /></div>
              <div class="fc-row"><label>Property Taxes (monthly)</label><input class="fc-input money" id="propertyTaxesMonthly" inputmode="numeric" /></div>
              <div class="fc-row"><label>Insurance (monthly)</label><input class="fc-input money" id="insuranceMonthly" inputmode="numeric" /></div>
              <div class="fc-row"><label>Utilities (monthly)</label><input class="fc-input money" id="utilitiesMonthly" inputmode="numeric" /></div>
              <div class="fc-row"><label>HOA (monthly)</label><input class="fc-input money" id="hoaMonthly" inputmode="numeric" /></div>
            </div>

            <div class="fc-section"><h3>6) Sensitivity Simulation</h3>
              <label class="fc-check"><input type="checkbox" id="sensArvDown"> ARV -5%</label>
              <label class="fc-check"><input type="checkbox" id="sensRehabUp"> Rehab +10%</label>
              <label class="fc-check"><input type="checkbox" id="sensHoldUp"> Hold +2 months</label>
            </div>

            <div class="fc-actions">
              <button class="fc-btn fc-btn-ghost" id="fcUseExampleBtn" type="button">Use Example</button>
              <button class="fc-btn" id="fcCalcBtn" type="button">Calculate Deal</button>
              <button class="fc-btn fc-btn-ghost" id="fcResetBtn" type="button">Reset Defaults</button>
              <select id="fcHistorySelect" class="fc-input"><option value="">Load saved...</option></select>
            </div>
          </div>

          <div class="fc-results" id="fcReportArea">
            <div class="fc-kpis" id="fcKpis">
              <div class="fc-card"><div class="fc-card-label">Net Profit</div><div class="fc-card-value" id="kpiProfit">$0</div></div>
              <div class="fc-card"><div class="fc-card-label">ROI on Cash</div><div class="fc-card-value" id="kpiRoi">0%</div></div>
              <div class="fc-card"><div class="fc-card-label">Annualized ROI</div><div class="fc-card-value" id="kpiRoiAnnualized">0%</div></div>
              <div class="fc-card"><div class="fc-card-label">Cash Required</div><div class="fc-card-value" id="kpiCash">$0</div></div>
            </div>
            <div class="fc-score" id="fcScoreBox"><div class="fc-score-title">Deal Score</div><div class="fc-score-pill" id="dealScorePill">â€”</div><div class="fc-score-bar"><div class="fc-score-bar-fill"></div></div><div class="fc-score-desc" id="dealScoreDesc">Calculate to see score rationale.</div></div>
            <div class="fc-breakdown"><h3>Deal Diagnostics</h3><div class="fc-breakdown-grid">
              <div class="fc-mini"><span>Loan Amount</span><strong id="diagLoanAmount">$0</strong></div>
              <div class="fc-mini"><span>Points Cost</span><strong id="diagPointsCost">$0</strong></div>
              <div class="fc-mini"><span>Total Interest</span><strong id="diagInterest">$0</strong></div>
              <div class="fc-mini"><span>Total Project Cost</span><strong id="diagTotalProject">$0</strong></div>
              <div class="fc-mini"><span>70% Rule Status</span><strong id="diagMaoStatus">â€”</strong></div>
              <div class="fc-mini"><span>Safety Margin</span><strong id="diagSafety">0%</strong></div>
            </div></div>
            <div class="fc-sensitivity"><h3>Sensitivity</h3><div class="fc-table-wrap"><table class="fc-table" id="fcSensitivityTable"><thead><tr><th>Scenario</th><th>Profit</th><th>ROI</th><th>Cash</th></tr></thead><tbody><tr><td colspan="4" class="fc-muted">Calculate to see table.</td></tr></tbody></table></div></div>
            <div class="fc-method"><h3>Investor Snapshot</h3><p id="investorSnapshot">Run calculation to generate recommendation.</p></div>
            <div class="fc-errors" id="fcErrors"></div>
          </div>
        </div>
      </section>
    </main>

    <script src="../lang.js"></script><script src="../script.js"></script>
    <script src="../assets/js/flip/config.js"></script><script src="../assets/js/flip/formatters.js"></script><script src="../assets/js/flip/validators.js"></script>
    <script src="../assets/js/flip/core.js"></script><script src="../assets/js/flip/scoring.js"></script><script src="../assets/js/flip/sensitivity.js"></script>
    <script src="../assets/js/flip/share_link.js"></script><script src="../assets/js/flip/export_pdf.js"></script><script src="../assets/js/flip/ui.js"></script>
    <script>
      (() => {
        const useExampleBtn = document.getElementById('fcUseExampleBtn');
        if (!useExampleBtn) return;
        useExampleBtn.addEventListener('click', () => {
          const sample = {
            purchasePrice: 180000,
            arv: 320000,
            expectedSellingPrice: 315000,
            rehab: 50000,
            months: 6,
            loanPct: 85,
            rehabFinancingPct: 100,
            downPct: 15,
            pointsPct: 2,
            interestApr: 12,
            loanTermMonths: 12,
            buyClosingPct: 2,
            sellingCostsPct: 8,
            holdingMonthly: 450,
            propertyTaxesMonthly: 260,
            insuranceMonthly: 140,
            utilitiesMonthly: 220,
            hoaMonthly: 0
          };
          Object.entries(sample).forEach(([id, value]) => {
            const input = document.getElementById(id);
            if (input) input.value = value;
          });
          document.getElementById('fcCalcBtn')?.click();
        });
      })();
    </script>
  </body>
</html>
